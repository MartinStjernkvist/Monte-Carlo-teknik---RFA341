import numpy as np
import pandas as pd
def Närmast(lista,tal):
        lista=np.array(lista)
        närmsta_index=(np.abs(lista-tal)).argmin()
        return lista[närmsta_index]

def Elektron_riktning(Elektron_energi): #Energi i elektron i tabell är i eV
    R=np.random.random() #Slumpmässig tal mellan 0-1
    theata_s= 1 #Test , teata_s är från tabellen
    #Läser in excel filen och tar ut koloumn med energi
    file_tvärsnitt=pd.read_excel('C:\Users\Admin\Documents\GitHub\Monte-Carlo-teknik---RFA341\given_data\Tvärsnittstabell_Elektroner.xlsx')
    Energi_data=file_tvärsnitt['Energy(eV)'].to_list()
    Range=file_tvärsnitt['Range (g/cm^2)']
    #Hittar närmast energi som liknar elektron energin och ta fram scatter power:

    theata_2=(np.random.random(0,2*np.pi))**2 #Slumpar ut theata till scattering power?
        #theata_s= derivata (theata_2)/ derivata (range)
    Närmast(Energi_data,Elektron_energi) #Hitta ett sätt att få scattering power och därmet theata_s


    """
    Energi_data=np.array(Energi_data)
    differens=np.abs(Energi_data-Elektron_energi)
    närmast_energi=np.arg
    """
    return np.sqrt(-theata_s*np.log(1-R))